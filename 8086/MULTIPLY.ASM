	TITLE Multiply Large Numbers

	.MODEL SMALL
	.STACK 64
	.DATA

	NUM1 DB 32 DUP('0'),'$'
	NUM2 DB 32 DUP('0'),'$'
	TEMP DB 32 DUP('0'),'$'
	RES DB 64 DUP('0'),'$'
	COUNT1 DW 0000
	COUNT2 DW 0000
	CTR DW 003FH
	CARRY DB 00

	.CODE

MAIN PROC FAR

	MOV AX,@DATA
	MOV DS,AX

	LEA DI,NUM1
	CALL INPUT
	MOV AX,COUNT1
	CALL NEWLINE
	MOV AH,09H
	LEA DX,NUM1
	INT 21H

	LEA DI,NUM2
	CALL NEWLINE
	CALL INPUT
	MOV AX,COUNT2
	MOV COUNT1,AX
	CALL NEWLINE
	MOV AH,09H
	LEA DX,NUM2
	INT 21H

	MOV CX,COUNT1
	DEC COUNT1
	MOV SI,COUNT1
	MOV DI,COUNT1
	MOV BX,31D
	
	M10:
	PUSH SI
	PUSH DI
	PUSH BX
	PUSH CX
	
	CALL NEWLINE
	CALL MULTIPLY
	MOV AH,09H
	LEA DX,temp
	INT 21H
	CALL NEWLINE
	CALL ADDTORES
	
	MOV AH,09H
	LEA DX,RES
	INT 21H

	POP CX
	POP BX
	POP DI
	POP SI
	DEC DI
	LOOP M10

	MOV AH,09H
	LEA DX,RES
	INT 21H

	MOV AH,4CH
	INT 21H

MAIN ENDP


INPUT PROC NEAR

	A10:
	MOV AH,01H
	INT 21H

	CMP AL,'.'
	JE A20

	INC COUNT1
	MOV [DI],AL
	INC DI
	JMP A10
	
	A20:
	RET

INPUT ENDP


MULTIPLY PROC NEAR

	INC COUNT1
	MOV CX,COUNT1
	DEC COUNT1

	MOV DL,NUM2[DI]
	SUB DL,30H
	MUL10:
	MOV AH,00
	MOV AL,NUM1[SI]
	SUB AL,30H
	MUL DL
	AAM
	ADD AL,30H
	ADD AL,TEMP[BX]
	AAA
	ADD AL,30H
	MOV TEMP[BX],AL
	DEC BX
	ADD AH,30H
	MOV TEMP[BX],AH
	DEC SI
	LOOP MUL10

	RET

MULTIPLY ENDP


ADDTORES PROC NEAR

	MOV CX,COUNT1
	INC CX
	INC CX
	MOV BX,1FH
	MOV DI,CTR
	MOV AH,00


	R10:
	MOV AL,TEMP[BX]
	ADD AL,AH
	ADD AL,RES[DI]
	MOV AH,00
	AAA
	MOV CARRY,AH
	ADD AL,30H
	MOV RES[DI],AL
	DEC BX
	DEC DI
	LOOP R10

	MOV AL,AH
	ADD AL,30H
	MOV RES[DI],AL

	CALL CLEARTEMP
	DEC CTR

	RET

ADDTORES ENDP


CLEARTEMP PROC NEAR

	MOV CX,32D
	LEA SI,TEMP

	MOV AL,30H
	C10:
	MOV [SI],AL
	INC SI
	LOOP C10

	RET

CLEARTEMP ENDP


NEWLINE PROC NEAR

	MOV AH,02H
	MOV DL,0AH
	INT 21H

	RET

END MAIN